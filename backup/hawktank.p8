pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
t=0
t_size=8
s_size=13*t_size
function create_sprite()
	local s = {}
	s.index = 0
	s.offset = 0
	s.down = false
	s.right = false
	return s
end

function create_2d(x,y)
	local p = {}
	local f = function(spd)
		if btn(0) and p.x>0 then
			p.x-=0.5
		elseif btn(1) and p.x<s_size-t_size then
			p.x+=0.5
		elseif btn(2) and p.y>0 then
			p.y-=0.5
		elseif btn(3) and p.y<s_size-t_size then
			me.pos.y+=0.5
		end
	end
	p.x = x
	p.y = y
	p.k_move = f
	return p
end

function create_ent(sp,pos)
	local e = {}
	e.sp = sp
	e.pos = pos
	return e
end

function hit(x,y,w,h)
  collide=false
  for i=x,x+w,w do
    if (fget(mget(i/8,y/8))>0) or
         (fget(mget(i/8,(y+h)/8))>0) then
          collide=true
    end
  end
  
  for i=y,y+h,h do
    if (fget(mget(x/8,i/8))>0) or
         (fget(mget((x+w)/8,i/8))>0) then
          collide=true
    end
  end
  
  return collide
end

function _init()
	me=create_ent(
		create_sprite(),
		create_2d(0,s_size-t_size)
	)
end

function _update60()
	t=t+1
	if (t%16)<8 then
		me.sp.index=0
	else
		me.sp.index=1
	end
	
	if btn(0) then
		me.sp.offset=2
		me.sp.down = false
		me.sp.right = false
	elseif btn(1) then
		me.sp.offset=2
		me.sp.down = false
		me.sp.right = true
	elseif btn(2) then
		me.sp.offset=0
		me.sp.down = false
		me.sp.right = false
	elseif btn(3) then
		me.sp.offset=0
		me.sp.down = true
		me.sp.right = false
	end

	

	me.pos.k_move(0.5)
end

function _draw()
	cls()
	map(0,0,0,0,13,13)
	spr(
		me.sp.index+me.sp.offset,
		me.pos.x,me.pos.y,
		1,1,
		me.sp.right,me.sp.down)

		local test=hit(me.pos.x,me.pos.y+0.5,6.5,6.5)
	print(test)
end
__gfx__
00000000000000000000000000000000445444544454445444544454445444540000000000000000000000000000000000000000000000000000000000000000
000aa000000aa00000d5d5d0005d5d50555555555555555555555555555555550000000000000000000000000000000000000000000000000000000000000000
050aa0500d0aa0d0000aaa00000aaa00544454445444544454445444000000000000000000000000000000000000000000000000000000000000000000000000
0da99ad005a99a500aa99a000aa99a00555555555555555555555555000000000005000000000000000000000000000000000000000000000000000000000000
05a99a500da99ad00aa99a000aa99a00445444544454445400000000000000000000000000000000000000000000000000000000000000000000000000000000
0daaaad005aaaa50000aaa00000aaa00555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000
050000500d0000d000d5d5d0005d5d50544454440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
65eeeed66deeeed66deeee56658888d66d8888d66d8888566d5555d6655555d66d5555d66d4444d6654444d66d4444d600000000000000000000000000000000
dd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dd00000000000000000000000000000000
de0ff0edde0ff0edde0ff0edd80ff08dd80ff08dd80ff08dd50ff05dd50ff05dd50ff05dd40ff04dd40ff04dd40ff04d00000000000000000000000000000000
ddeffeddddeffeddddeffedddd8ff8dddd8ff8dddd8ff8dddd5ff5dddd5ff5dddd5ff5dddd4ff4dddd4ff4dddd4ff4dd00000000000000000000000000000000
fe8888eeef8888feee8888eff82222888f2222f88822228ff52222555f2222f55522225ff42222444f2222f44422224f00000000000000000000000000000000
eeeeeeefeeeeeeeefeeeeeefe888888fe888888ef888888e6555555fd555555df5555556e444444fe444444ef444444e00000000000000000000000000000000
0eeeeeeffeeeeeeffeeeeee00888888ff888888ff88888800555555ff555555ff55555500444444ff444444ff444444000000000000000000000000000000000
6e88eee66ee88ee66eee88e664228886688228866888224665225556655225566555225664224446644224466444224600000000000000000000000000000000
6eeeeee66eeeeee66eeeeee66d8888d66d8888d66d8888d66d5555d66d5555d66d5555d66d4444d66d4444d66d4444d600000000000000000000000000000000
dd8888dddd8888dddd8888dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dd00000000000000000000000000000000
d888888dd888888dd888888dd222222dd222222dd222222dd222222dd222222dd222222dd222222dd222222dd222222d00000000000000000000000000000000
dd8888dddd8888dddd8888dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dddd2222dd00000000000000000000000000000000
fe8888eeef8888feee8888eff82222888f2222f88822228ff52222555f2222f55522225ff42222444f2222f44422224f00000000000000000000000000000000
eeeeeeefeeeeeeeefeeeeeefe888888fe888888ef888888e6555555fd555555df5555556e444444fe444444ef444444e00000000000000000000000000000000
0eeeeeeffeeeeeeffeeeeee00888884ff888888ff48888800555555ff555555ff55555500444444ff444444ff444444000000000000000000000000000000000
eeee88eeeee88eeeee88eeee88882288888228888822888855552255555225555522555544442244444224444422444400000000000000000000000000000000
eee6eeeeeee6eeeeeee6eeee2886888e2886888e2886888e5556555d5556555d5556555d2446444e2446444e2446444e00000000000000000000000000000000
888df0ff888df0ff888df0ff222df0fe222df0fe222df0fe222df0f6222df0f6222df0f6222df0fe222df0fe222df0fe00000000000000000000000000000000
888ef0ff888ef0ff888ef0ff2228f0ff2228f0ff2228f0ff2225f0ff2225f0ff2225f0ff2224f0ff2224f0ff2224f0ff00000000000000000000000000000000
8dd8ef4f8dd8ef4f8dd8ef4f2dd28fdf2dd28fdf2dd28fdf2dd25fdf2dd25fdf2dd25fdf2dd24fdf2dd24fdf2dd24fdf00000000000000000000000000000000
e8e888e0e8e888e0e8e888e02282224022822240d2822240525222d0525222d0d25222d02242224022422240d242224000000000000000000000000000000000
eeefeee0eefeeee0efeeeee0888f888088f888804f888880555f555055f55550df555550444f444044f444404f44444000000000000000000000000000000000
eeeeeeeeeeeeeeeeeeeeeee228888888888888888888882255555555555555555555555224444444444444444444442200000000000000000000000000000000
88eeeeeeeeee8eeeeeeee88422888888888828888888822222555555555525555555522222444444444424444444422200000000000000000000000000000000
eeee6eeeeeee6eeeeeee6ee848886888e88868888888688245556555d55565555555655244446444e44464444444644200000000000000000000000000000000
ff0fd888ff0fd888ff0fd888ef0fd222ef0fd222ef0fd2226f0fd2226f0fd2226f0fd222ef0fd222ef0fd222ef0fd22200000000000000000000000000000000
ff0fe888ff0fe888ff0fe888ff0f8222ff0f8222ff0f8222ff0f5222ff0f5222ff0f5222ff0f4222ff0f4222ff0f422200000000000000000000000000000000
f4fe8dd8f4fe8dd8f4fe8dd8fdf82dd2fdf82dd2fdf82dd2fdf52dd2fdf52dd2fdf52dd2fdf42dd2fdf42dd2fdf42dd200000000000000000000000000000000
0e888e8e0e888e8e0e888e8e0422282d04222822042228220d22252d0d2225250d2225250422242d042224220422242200000000000000000000000000000000
0eeeeefe0eeeefee0eeefeee088888f408888f880888f888055555fd05555f550555f555044444f404444f440444f44400000000000000000000000000000000
8eeeeeeeeeeeeeeeeeeeeeee22888888888888888888888225555555555555555555555522444444444444444444444200000000000000000000000000000000
e88dddee6dd8ee666eeddd88d2249888ee4288eee8899422d2255555dd52555dd5555522d22eed4466d244d6644eed2200000000000000000000000000000000
8080bbd665bbbbd66dbbbb5665aaaa466daaaa4664aaaa566533335665333356653333566d7777d66d7777d66d7777d680000000000000000000000000000000
dd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dddd0ff0dd00000000000000000000000000000000
db8080bddb0ff0bddb0ff0bdda0ff0adda0ff0adda0ff0add30ff03dd30ff03dd30ff03dd70ff07dd70ff07dd70ff07d80000000000000000000000000000000
ddbffbddddbffbddddbffbddddaffaddddaffaddddaffadddd3ff3dddd3ff3dddd3ff3dddd7ff7dddd7ff7dddd7ff7dd00000000000000000000000000000000
fb338080bf3333fbbb3333bffa9999aa808099faaa9999aff31111333f1111f33311113ff7eeee777feeeef777eeee7f80000000000000000000000000000000
dbbbbbbfdbbbbbbdfbbbbbb6faaaaaaffaaaaaaffaaaaaaf6533333fd533335df3333356ff77777fff7777fff77777ff00000000000000000000000000000000
0bbbbbbf8080bbbffbbbbbb00a808080faaa80affa8080a00333333ff333333ff38080300f80807ff7777780f77777f080000000000000000000000000000000
6b33bbb66bb33bb66bbb33b66a99aaa66aa99aa66aaa99a66511333663311336633311566fee7776677ee7766777eef600000000000000000000000000000000
6dbbbbd66d8080d66dbbbbd6648080f66faa80f66f808046653333d66d3333d66d80805666808080807777666677776680000000000000000000000000000000
dd3333dddd3333dddd3333dddd9999dddd9999dddd9999dddd1111dddd1111dddd1111ddddeeeeddddeeeeddddeeeedd00000000000000000000000000000000
d333333dd33333808033333dd9808080d9999980d980809dd111111dd111111dd111111ddeeeeeeddeeeeeeddeeeeeed80000000000000000000000000000000
dd3333dddd3333dddd3333dddd9999dddd9999dddd9999dddd1111dddd1111dddd1111ddddeeeeddddeeeeddddeeeedd00000000000000000000000000000000
fb3333bbbf3333fb808080bffa8080aaaf9980faaa8080aff31111333f1111f33311113ff7eeee777feeeef777eeee7f80000000000000000000000000000000
dbbbbbbfdbbbbbbdfbbbbbb6faaaaaaffaaaaaaffaaaaaaf6533333fd533335df3333356ff77777fff7777fff77777ff00000000000000000000000000000000
0bbbbbbffbbbbbbffbbb808080aaaaaffa8080affaaaaaa00333335ff333333ff5333330077777fff777777fff77777080000000000000000000000000000000
bbbb33bbbbb33bbbbb33bbbbaaaa99aaaaa99aaaaa99aaaa3333113333311333331133337777ee77777ee77777ee777700000000000000000000000000000000
3bb6bbbd3bb6bbbd3bb6bbbdaa8080808080aaafaaa6aaaf1336333d1336333d1336333df776777ff776777ff776777f80000000000000000000000000000000
333df0f6333df0f6333df0f6999df0ff999df0ff999df0ff111df0f6111df0f6111df0f6eeedf0ffeeedf0ffeeedf0ff00000000000000000000000000000000
333bf0ff333bf0ff333bf0ff999af0ff999af0ff999af0ff5113f0ff5113f0ff5113f0ffeee7f0ffeee7f0ffeee7f0ff80000000000000000000000000000000
3dd3bfdf3dd3bfdf3dd3bfdf9dd9af4f9dd9af4f9dd9af4f5dd13fdf5dd13fdf5dd13fdfedde7fdfedde7fdfedde7fdf00000000000000000000000000000000
33b333d033b333d0d3b333d099a999a099a99980e9a999a05131115051311150d13111506e7eeef06e7eeef0ee7eeef080000000000000000000000000000000
bbbfbbb0bbfbbbb0dfbbbbb0aaafaaa0aafaaaa0afaaaaa0333f333033f333305f333330f77f77f0f7f777f0ff7777f000000000000000000000000000000000
3bbbbbbbbbbbbbbbbbbbbb358080808080808080808080a41333333333333333333333156777777777777777777777fe80000000000000000000000000000000
33bbbbbbbbbb3bbbbbbbb33599aaaaaaaaaa9aaaaaaaa9941133333333331333333331115e7777777777e77777777eef00000000000000000000000000000000
3bbb6bbbdbbb6bbbbbbb6bb380806a808080808080806aa953336333d3336333333363316777677ff777677f7777677e80000000000000000000000000000000
6f0fd3336f0fd3336f0fd333ff0fd999ff0fd999ff0fd9996f0fd1116f0fd1116f0fd111ff0fdeeeff0fdeeeff0fdeee00000000000000000000000000000000
ff0fb380ff0fb333ff0fb333ff0fa999800fa999ff0fa999ff0f3115ff0f3115ff0f3115ff0f7eeeff0f7eeeff0f7eee80000000000000000000000000000000
fdfb3dd3fdfb3dd3fdfb3dd3f4fa9dd9f4fa9dd9f4fa9dd9fdf31dd5fdf31dd5fdf31dd5fdf7eddefdf7eddefdf7edde00000000000000000000000000000000
0d33803d0d3380330d333b330a99808080999a990a999a990511131d05111315051113150feee7ee0feee7e60feee7e680000000000000000000000000000000
0bbbbbfd0bbbbfbb0bbbfbbb0aaaaafa0aaaafaa0aaafaaa033333f503333f330333f3330f7777ff0f777f7f0f77f77f00000000000000000000000000000000
3380808080808080808080805a808080808080808080808041333333333333333333333156777777777777777777777f80000000000000000000000000000000
333bbbbbbbb3bbbbbbbbbb33599aaaaaaaa9aaaaaaaaaa9941133333333133333333331155e7777777fe7777777777ee00000000000000000000000000000000
80808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
80808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080000000000000000000000000000000
__gff__
0202020201010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0804040404040804040404040800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0408080808080808080808080400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0408080808080808080808080400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0408080808080808080808080400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
080808080808080808080808080000000c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08080808080808080808080808000c0c0c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000c0c0c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000c0c0c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000c0c0c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
